<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transferencia Exitosa</title>
    <link rel="stylesheet" href="styles/styles.css">
</head>
<body>
    <div class="transferencia-exitosa" id="comprobante" onclick="openFullscreen()">
        <img src="images/banner-azul.png" alt="Banner Azul" class="banner-azul">
        <div class="header">
            <img src="images/check-icon.png" alt="Check Icon" class="check-icon">
            <h1>Transferencia exitosa</h1>
        </div>
        <div class="details">
            <p>Pagado a <span id="nombre"></span></p>
            <p>Cuenta destino <span id="numeroCuenta"></span></p>
            <p>Banco destino <span id="bancoDestino"></span></p>
            <p>Monto <span class="bold" id="monto"></span></p>
        </div>
        <div class="footer">
            <div class="footer-left">
                <p>Fecha y hora</p>
                <p><span id="fechaHora"></span></p>
                <p>Transacción</p>
                <p><span id="transaccionId"></span></p>
            </div>
            <img src="images/mi-banco-logo.png" alt="Mi Banco Logo" class="bank-logo">
        </div>
        <div class="action-buttons">
            <button id="compartirBtn" class="share-button">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" class="icon"><path fill="currentColor" d="M384 320c-16.79 0-32.31 5.302-45.13 14.21l-110.4-64.02a96.461 96.461 0 0 0 0-28.38l110.4-64.02C351.7 186.7 367.2 192 384 192c53.02 0 96-42.98 96-96S437 0 384 0s-96 42.98-96 96c0 6.746 1.019 13.19 2.67 19.35l-110.4 64.02c-17.33-19.13-41.66-31.37-69.27-31.37C53.02 148 0 201 0 268.8c0 67.79 53.02 120.8 118.4 120.8 27.61 0 51.94-12.24 69.27-31.37l110.4 64.02C289 402.8 288 409.3 288 416c0 53.02 42.98 96 96 96s96-42.98 96-96S437 320 384 320zM384 32c35.35 0 64 28.65 64 64s-28.65 64-64 64-64-28.65-64-64S348.7 32 384 32zM118.4 352c-44.11 0-80-35.88-80-80s35.88-80 80-80 80 35.88 80 80S162.5 352 118.4 352zM384 480c-35.35 0-64-28.65-64-64s28.65-64 64-64 64 28.65 64 64S419.3 480 384 480z"/></svg>
                COMPARTIR COMPROBANTE
            </button>
            <button onclick="location.href='index.html'" class="back-button">IR A INICIO</button>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const params = new URLSearchParams(window.location.search);
            document.getElementById('nombre').innerText = params.get('nombre');
            document.getElementById('numeroCuenta').innerText = params.get('numeroCuenta');
            document.getElementById('bancoDestino').innerText = params.get('bancoDestino');
            document.getElementById('monto').innerText = '$' + params.get('monto');
            document.getElementById('fechaHora').innerText = params.get('fecha');
            document.getElementById('transaccionId').innerText = params.get('transaccionId');
        });

        function openFullscreen() {
            const elem = document.querySelector('.transferencia-exitosa');
            if (elem.requestFullscreen) {
                elem.requestFullscreen();
            } else if (elem.webkitRequestFullscreen) { /* Safari */
                elem.webkitRequestFullscreen();
            } else if (elem.msRequestFullscreen) { /* IE11 */
                elem.msRequestFullscreen();
            }
        }

        document.getElementById('compartirBtn').addEventListener('click', function() {
            html2canvas(document.getElementById('comprobante')).then(function(canvas) {
                canvas.toBlob(function(blob) {
                    const file = new File([blob], "comprobante.png", { type: "image/png" });
                    if (navigator.share) {
                        navigator.share({
                            files: [file],
                            title: 'Comprobante de Transferencia',
                            text: 'Aquí está el comprobante de la transferencia',
                        })
                        .catch((error) => console.log('Error al compartir:', error));
                    } else {
                        alert('La funcionalidad de compartir no está soportada en este navegador.');
                    }
                });
            });
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
</body>
</html>
